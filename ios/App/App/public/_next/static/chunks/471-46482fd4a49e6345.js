"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{109:(e,r,t)=>{t.d(r,{Fe:()=>p,Gr:()=>g,H4:()=>m,Ll:()=>h,XG:()=>c,g:()=>d,ib:()=>f,pd:()=>u});var n=t(82964),o=t(52007),a=t(94548),l=t(63473),i=t(57194);let s="journalEntries";async function d(e){if(!e)return console.warn("[Journal] getJournalEntriesForUser: No userId provided."),[];console.log("[Journal] getJournalEntriesForUser called for userId: ".concat(e));try{let r=(0,n.P)((0,n.rJ)(o.db,s),(0,n._M)("userId","==",e),(0,n.My)("date","desc")),t=await (0,n.GG)(r),a=[];return t.forEach(e=>{a.push({id:e.id,...e.data()})}),console.log("[Journal] Found ".concat(a.length," entries for userId ").concat(e,".")),a}catch(r){throw console.error("[Journal] Error fetching journal entries for userId ".concat(e,":"),r),r}}async function u(e){if(!e)return console.warn("[Journal] getLatestJournalEntryForUser: No userId provided."),null;try{let r=(0,n.P)((0,n.rJ)(o.db,s),(0,n._M)("userId","==",e),(0,n.My)("date","desc"),(0,n.AB)(1)),t=await (0,n.GG)(r);if(!t.empty){let e=t.docs[0].data();return{id:t.docs[0].id,...e}}return null}catch(r){throw console.error("[Journal] Error fetching latest journal entry for userId ".concat(e,":"),r),r}}async function c(e){if(!e)return console.warn("[Journal] getJournalEntriesCountForUser: No userId provided."),0;try{let r=(0,n.P)((0,n.rJ)(o.db,s),(0,n._M)("userId","==",e));return(await (0,n.d_)(r)).data().count}catch(r){throw console.error("[Journal] Error fetching journal entry count for userId ".concat(e,":"),r),r}}async function f(e,r){if(!e)return console.warn("[Journal] getJournalEntriesForLastNDays: No userId provided."),[];try{let t=new Date,d=(0,a.D)(t),u=(0,l.o)((0,i.e)(t,r-1)),c=(0,n.P)((0,n.rJ)(o.db,s),(0,n._M)("userId","==",e),(0,n._M)("date",">=",u.toISOString()),(0,n._M)("date","<=",d.toISOString()),(0,n.My)("date","desc")),f=await (0,n.GG)(c),p=[];return f.forEach(e=>{p.push({id:e.id,...e.data()})}),p}catch(t){throw console.error("[Journal] Error fetching journal entries for last ".concat(r," days for userId ").concat(e,":"),t),t}}async function p(e,r){if(!e)throw Error("[Journal] addJournalEntry: No userId provided.");console.log("[Journal] addJournalEntry called for userId: ".concat(e));try{let t=await (0,n.gS)((0,n.rJ)(o.db,s),{userId:e,content:r.content,moodRating:r.moodRating,date:r.date,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()});console.log("[Journal] Added entry with ID: ".concat(t.id," for userId ").concat(e,"."));let a=await (0,n.x7)(t);return{id:a.id,...a.data()}}catch(r){throw console.error("[Journal] Error adding journal entry for userId ".concat(e,":"),r),r}}async function g(e){if(console.log("[Journal] getJournalEntryById called for entryId: ".concat(e)),!e)return console.warn("[Journal] getJournalEntryById: No entryId provided."),null;try{let r=(0,n.H9)(o.db,s,e),t=await (0,n.x7)(r);if(!t.exists())return console.log("[Journal] No entry found for ID ".concat(e,".")),null;{let e={id:t.id,...t.data()};return console.log("[Journal] Found entry by ID:",e),e}}catch(r){throw console.error("[Journal] Error fetching journal entry by ID ".concat(e,":"),r),r}}async function h(e,r){if(console.log("[Journal] updateJournalEntry called for entryId: ".concat(e)),!e)throw Error("[Journal] updateJournalEntry: No entryId provided.");try{let t=(0,n.H9)(o.db,s,e);if(!(await (0,n.x7)(t)).exists())return console.warn("[Journal] Update failed: No entry found for ID ".concat(e,".")),null;let a={...r};r.date&&(a.date=r.date),a.updatedAt=(0,n.O5)(),await (0,n.mZ)(t,a),console.log("[Journal] Updated entry with ID: ".concat(e,"."));let l=await (0,n.x7)(t);if(l.exists())return{id:l.id,...l.data()};return null}catch(r){throw console.error("[Journal] Error updating journal entry ".concat(e,":"),r),r}}async function m(e){if(console.log("[Journal] deleteJournalEntry called for entryId: ".concat(e)),!e)throw Error("[Journal] deleteJournalEntry: No entryId provided.");try{let r=(0,n.H9)(o.db,s,e);return await (0,n.kd)(r),console.log("[Journal] Deleted entry with ID: ".concat(e,".")),!0}catch(r){throw console.error("[Journal] Error deleting journal entry ".concat(e,":"),r),r}}},5747:(e,r,t)=>{t.d(r,{L:()=>a});var n=t(37876),o=t(46907);function a(e){let{children:r,className:t}=e;return(0,n.jsx)("div",{className:(0,o.cn)("container mx-auto px-4 py-8 sm:px-6 lg:px-8",t),children:r})}},10714:(e,r,t)=>{t.d(r,{s:()=>l,t:()=>a});var n=t(14232);function o(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function a(...e){return r=>{let t=!1,n=e.map(e=>{let n=o(e,r);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let r=0;r<n.length;r++){let t=n[r];"function"==typeof t?t():o(e[r],null)}}}}function l(...e){return n.useCallback(a(...e),e)}},31928:(e,r,t)=>{t.d(r,{dj:()=>f});var n=t(14232);let o=0,a=new Map,l=e=>{if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,r)},i=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},s=[],d={toasts:[]};function u(e){d=i(d,e),s.forEach(e=>{e(d)})}function c(e){let{...r}=e,t=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:t});return u({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function f(){let[e,r]=n.useState(d);return n.useEffect(()=>(s.push(r),()=>{let e=s.indexOf(r);e>-1&&s.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},33193:(e,r,t)=>{t.d(r,{A:()=>n});let n=(0,t(38684).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},34855:(e,r,t)=>{t.d(r,{A:()=>n});let n=(0,t(38684).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},38684:(e,r,t)=>{t.d(r,{A:()=>s});var n=t(14232);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:d="",children:u,iconNode:c,...f}=e;return(0,n.createElement)("svg",{ref:r,...l,width:o,height:o,stroke:t,strokeWidth:s?24*Number(i)/Number(o):i,className:a("lucide",d),...f},[...c.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(u)?u:[u]])}),s=(e,r)=>{let t=(0,n.forwardRef)((t,l)=>{let{className:s,...d}=t;return(0,n.createElement)(i,{ref:l,iconNode:r,className:a("lucide-".concat(o(e)),s),...d})});return t.displayName="".concat(e),t}},42740:(e,r,t)=>{t.d(r,{$:()=>d,r:()=>s});var n=t(37876),o=t(14232),a=t(82987),l=t(47137),i=t(46907);let s=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,r)=>{let{className:t,variant:o,size:l,asChild:d=!1,...u}=e,c=d?a.DX:"button";return(0,n.jsx)(c,{className:(0,i.cn)(s({variant:o,size:l,className:t})),ref:r,...u})});d.displayName="Button"},46907:(e,r,t)=>{t.d(r,{cn:()=>a});var n=t(69241),o=t(29573);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,n.$)(r))}},47137:(e,r,t)=>{t.d(r,{F:()=>l});var n=t(69241);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=n.$,l=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return a(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:i}=r,s=Object.keys(l).map(e=>{let r=null==t?void 0:t[e],n=null==i?void 0:i[e];if(null===r)return null;let a=o(r)||o(n);return l[e][a]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return a(e,s,null==r||null==(n=r.compoundVariants)?void 0:n.reduce((e,r)=>{let{class:t,className:n,...o}=r;return Object.entries(o).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...d}[r]):({...i,...d})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},49105:(e,r,t)=>{t.d(r,{A:()=>f});var n=t(14232),o=t(14e3),a=t(29917),l=t(82964),i=t(52007);let s="users";async function d(e,r,t){if(!t)throw Error("Password is required for signup.");try{let n=(await (0,a.eJ)(i.j,e,t)).user;await (0,a.gA)(n),console.log("[Auth] Verification email sent.");let o={id:n.uid,email:n.email||e,name:r,emailVerified:n.emailVerified};return await (0,l.BN)((0,l.H9)(i.db,s,n.uid),o),console.log("[Auth] User signed up and profile created in Firestore:",o),o}catch(e){throw console.error("[Auth] Error during signup:",e.message),e}}async function u(e,r){if(!r)throw Error("Password is required for login.");try{let t=(await (0,a.x9)(i.j,e,r)).user,n=(0,l.H9)(i.db,s,t.uid),o=await (0,l.x7)(n);if(o.exists())o.data().emailVerified!==t.emailVerified&&await (0,l.mZ)(n,{emailVerified:t.emailVerified});else{console.warn("[Auth] User profile not found in Firestore during login. Creating a basic one.");let r={id:t.uid,email:t.email||e,name:t.displayName||e.split("@")[0],emailVerified:t.emailVerified};await (0,l.BN)(n,r)}return console.log("[Auth] User authentication successful via signInWithEmailAndPassword."),t}catch(e){throw console.error("[Auth] Error during login:",e.message),e}}async function c(){try{await (0,a.CI)(i.j),console.log("[Auth] User signed out.")}catch(e){throw console.error("[Auth] Error during sign out:",e.message),e}}function f(){let[e,r]=(0,n.useState)(null),[t,f]=(0,n.useState)(!0),p=(0,o.useRouter)();(0,n.useEffect)(()=>{var e;let t=(e=e=>{r(e),f(!1),e||["/login","/signup"].includes(window.location.pathname)},(0,a.hg)(i.j,async r=>{if(r){let n=(0,l.H9)(i.db,s,r.uid),o=await (0,l.x7)(n);if(o.exists()){let t=o.data();t.emailVerified!==r.emailVerified&&await (0,l.mZ)(n,{emailVerified:r.emailVerified}),e({...t,id:r.uid,email:r.email||t.email,emailVerified:r.emailVerified})}else{var t;console.warn("[Auth] User profile not found for UID: ".concat(r.uid," during onAuthStateChanged. Creating a basic profile."));let n={id:r.uid,email:r.email||"",name:r.displayName||(null==(t=r.email)?void 0:t.split("@")[0])||"User",emailVerified:r.emailVerified};try{await (0,l.BN)((0,l.H9)(i.db,s,r.uid),n),e(n)}catch(t){console.error("[Auth] Failed to create fallback user profile in Firestore:",t),e({id:r.uid,email:r.email||"",name:r.displayName||"User",emailVerified:r.emailVerified})}}}else e(null)}));return()=>t()},[]);let g=(0,n.useCallback)(async(e,r)=>{f(!0);try{let t=await u(e,r);return t&&p.push("/dashboard"),t}catch(e){throw console.error("[AuthHook] Login failed:",e),f(!1),e}},[p]);return{user:e,isLoading:t,login:g,signup:(0,n.useCallback)(async(e,r,t)=>{f(!0);try{let n=await d(e,r,t);return p.push("/login"),n}catch(e){throw console.error("[AuthHook] Signup failed:",e),f(!1),e}},[p]),logout:(0,n.useCallback)(async()=>{f(!0);try{await c(),p.push("/login")}catch(e){console.error("[AuthHook] Logout failed:",e),f(!1)}},[p])}}},51569:(e,r,t)=>{t.d(r,{q:()=>i});var n=t(37876),o=t(14232),a=t(14e3),l=t(49105);let i=e=>{let{children:r}=e,{user:t,isLoading:i}=(0,l.A)(),s=(0,a.useRouter)();return((0,o.useEffect)(()=>{i||t||s.replace("/login")},[t,i,s]),i||!t)?null:(0,n.jsx)(n.Fragment,{children:r})}},52007:(e,r,t)=>{let n;t.d(r,{db:()=>d,j:()=>s});var o=t(16042),a=t(29917),l=t(82964);let i={apiKey:"AIzaSyBiidZpnKIjM59jXZoCgEWvylA1CQjc2PM",authDomain:"soloura-health.firebaseapp.com",projectId:"soloura-health",storageBucket:"soloura-health.firebasestorage.app",messagingSenderId:"179780492964",appId:"1:179780492964:web:665c44b3a7fe5906e11031",measurementId:"G-L6B1SZS5C4"};i.apiKey&&i.authDomain&&i.projectId||console.error("Firebase configuration is missing or incomplete. Please check your environment variables (e.g., .env.local for development or hosting provider settings for production)."),n=(0,o.Dk)().length?(0,o.Sx)():(0,o.Wp)(i);let s=(0,a.xI)(n),d=(0,l.aU)(n)},72636:(e,r,t)=>{t.d(r,{s:()=>a});var n=t(37876),o=t(46907);function a(e){let{children:r,className:t}=e;return(0,n.jsx)("h1",{className:(0,o.cn)("text-2xl sm:text-3xl font-headline font-bold text-primary mb-6",t),children:r})}},82987:(e,r,t)=>{t.d(r,{DX:()=>l,xV:()=>s});var n=t(14232),o=t(10714),a=t(37876),l=n.forwardRef((e,r)=>{let{children:t,...o}=e,l=n.Children.toArray(t),s=l.find(d);if(s){let e=s.props.children,t=l.map(r=>r!==s?r:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(i,{...o,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,t):null})}return(0,a.jsx)(i,{...o,ref:r,children:t})});l.displayName="Slot";var i=n.forwardRef((e,r)=>{let{children:t,...a}=e;if(n.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),l=function(e,r){let t={...r};for(let n in r){let o=e[n],a=r[n];/^on[A-Z]/.test(n)?o&&a?t[n]=(...e)=>{a(...e),o(...e)}:o&&(t[n]=o):"style"===n?t[n]={...o,...a}:"className"===n&&(t[n]=[o,a].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==n.Fragment&&(l.ref=r?(0,o.t)(r,e):e),n.cloneElement(t,l)}return n.Children.count(t)>1?n.Children.only(null):null});i.displayName="SlotClone";var s=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});function d(e){return n.isValidElement(e)&&e.type===s}},90034:(e,r,t)=>{t.d(r,{BT:()=>d,Wu:()=>u,ZB:()=>s,Zp:()=>l,aR:()=>i,wL:()=>c});var n=t(37876),o=t(14232),a=t(46907);let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...o})});l.displayName="Card";let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...o})});i.displayName="CardHeader";let s=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...o})});s.displayName="CardTitle";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...o})});d.displayName="CardDescription";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...o})});u.displayName="CardContent";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...o})});c.displayName="CardFooter"}}]);