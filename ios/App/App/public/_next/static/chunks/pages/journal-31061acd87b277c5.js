(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{23179:(e,t,r)=>{"use strict";r.d(t,{$v:()=>h,EO:()=>u,Lt:()=>o,Rx:()=>p,Zr:()=>y,ck:()=>f,r7:()=>x,wd:()=>m});var a=r(37876),s=r(14232),n=r(91806),l=r(46907),i=r(42740);let o=n.bL;n.l9;let d=n.ZL,c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});c.displayName=n.hJ.displayName;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});u.displayName=n.UC.displayName;let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};m.displayName="AlertDialogHeader";let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",r),...s})});x.displayName=n.hE.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.VY.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,l.cn)((0,i.r)(),r),...s})});p.displayName=n.rc.displayName;let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.ZD,{ref:t,className:(0,l.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});y.displayName=n.ZD.displayName},24425:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/journal",function(){return r(69269)}])},33716:(e,t,r)=>{"use strict";function a(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),!1===r||!a.defaultPrevented)return t?.(a)}}r.d(t,{m:()=>a})},58162:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});var a=r(14232),s=r(62146);function n({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,l]=function({defaultProp:e,onChange:t}){let r=a.useState(e),[n]=r,l=a.useRef(n),i=(0,s.c)(t);return a.useEffect(()=>{l.current!==n&&(i(n),l.current=n)},[n,l,i]),r}({defaultProp:t,onChange:r}),i=void 0!==e,o=i?e:n,d=(0,s.c)(r);return[o,a.useCallback(t=>{if(i){let r="function"==typeof t?t(e):t;r!==e&&d(r)}else l(t)},[i,e,l,d])]}},62146:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var a=r(14232);function s(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}},66326:(e,t,r)=>{"use strict";r.d(t,{hO:()=>o,sG:()=>i});var a=r(14232),s=r(98477),n=r(82987),l=r(37876),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=a.forwardRef((e,r)=>{let{asChild:a,...s}=e,i=a?n.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(i,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function o(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},69269:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var a=r(37876),s=r(14232),n=r(48230),l=r.n(n),i=r(42740),o=r(5747),d=r(72636),c=r(90034),u=r(98009),m=r(1629),f=r(5686),x=r(62757),h=r(80579),p=r(12769),y=r(66388);function g(e){let{entry:t,onDelete:r}=e;return(0,a.jsxs)(c.Zp,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col h-full",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ZB,{className:"font-headline text-xl mb-1",children:(0,m.GP)((0,f.H)(t.date),"MMMM d, yyyy")}),(0,a.jsx)(c.BT,{children:(0,m.GP)((0,f.H)(t.date),"h:mm a")})]}),(0,a.jsxs)(u.E,{variant:"outline",className:"flex items-center gap-2 text-sm px-3 py-1 ".concat(t.moodRating>=8?"bg-green-100 text-green-700 border-green-300":t.moodRating>=5?"bg-yellow-100 text-yellow-700 border-yellow-300":"bg-red-100 text-red-700 border-red-300"),children:[t.moodRating>=8?(0,a.jsx)(x.A,{className:"h-5 w-5 text-green-500"}):t.moodRating>=5?(0,a.jsx)(h.A,{className:"h-5 w-5 text-yellow-500"}):(0,a.jsx)(p.A,{className:"h-5 w-5 text-red-500"}),"Mood: ",t.moodRating,"/10"]})]})}),(0,a.jsx)(c.Wu,{className:"flex-grow",children:(0,a.jsx)("p",{className:"text-foreground leading-relaxed line-clamp-4 whitespace-pre-wrap",children:t.content})}),(0,a.jsxs)(c.wL,{className:"flex justify-end gap-2 border-t pt-4",children:[r&&(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>r(t.id),className:"text-destructive hover:bg-destructive/10 hover:text-destructive",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Delete"]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",asChild:!0,className:"border-primary text-primary hover:bg-primary/10",children:(0,a.jsx)(l(),{href:"/journal/".concat(t.id),children:"View Details"})})]})]})}var j=r(49105),v=r(109),N=r(34855);let w=(0,r(38684).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var b=r(33193),C=r(31928),E=r(23179),k=r(51569);function _(){let{user:e}=(0,j.A)(),[t,r]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0),{toast:u}=(0,C.dj)(),[m,f]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),p=(0,s.useCallback)(async()=>{if(e){c(!0);try{let t=await (0,v.g)(e.id);r(t)}catch(e){console.error("Failed to fetch journal entries:",e),u({title:"Error",description:"Could not load journal entries.",variant:"destructive"})}finally{c(!1)}}else r([]),c(!1)},[e,u]);(0,s.useEffect)(()=>{p()},[p]);let y=e=>{f(e)},_=async()=>{if(e&&m){h(!0);try{await (0,v.H4)(m),u({title:"Success",description:"Journal entry deleted."}),await p()}catch(e){console.error("Failed to delete entry:",e),u({title:"Error",description:"Failed to delete entry.",variant:"destructive"})}finally{f(null),h(!1)}}};return n?(0,a.jsxs)(o.L,{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[(0,a.jsx)(N.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading your journal..."})]}):(0,a.jsx)(k.q,{children:(0,a.jsxs)(o.L,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(d.s,{children:"My Journal"}),(0,a.jsx)(i.$,{asChild:!0,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:(0,a.jsxs)(l(),{href:"/journal/new",children:[(0,a.jsx)(w,{className:"mr-2 h-5 w-5"})," New Entry"]})})]}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.A,{className:"mx-auto h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No journal entries yet."}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Start writing to track your thoughts and mood."}),(0,a.jsx)(i.$,{asChild:!0,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:(0,a.jsx)(l(),{href:"/journal/new",children:"Create Your First Entry"})})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsx)(g,{entry:e,onDelete:y},e.id))}),m&&(0,a.jsx)(E.Lt,{open:!!m,onOpenChange:e=>!e&&f(null),children:(0,a.jsxs)(E.EO,{children:[(0,a.jsxs)(E.wd,{children:[(0,a.jsx)(E.r7,{children:"Are you sure?"}),(0,a.jsx)(E.$v,{children:"This action cannot be undone. This will permanently delete your journal entry."})]}),(0,a.jsxs)(E.ck,{children:[(0,a.jsx)(E.Zr,{onClick:()=>f(null),disabled:x,children:"Cancel"}),(0,a.jsx)(E.Rx,{onClick:_,disabled:x,className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:x?(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4 animate-spin"}):"Delete"})]})]})})]})})}},81285:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});var a=r(14232),s=globalThis?.document?a.useLayoutEffect:()=>{}},91844:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,q:()=>n});var a=r(14232),s=r(37876);function n(e,t){let r=a.createContext(t),n=e=>{let{children:t,...n}=e,l=a.useMemo(()=>n,Object.values(n));return(0,s.jsx)(r.Provider,{value:l,children:t})};return n.displayName=e+"Provider",[n,function(s){let n=a.useContext(r);if(n)return n;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function l(e,t=[]){let r=[],n=()=>{let t=r.map(e=>a.createContext(e));return function(r){let s=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return n.scopeName=e,[function(t,n){let l=a.createContext(n),i=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,d=r?.[e]?.[i]||l,c=a.useMemo(()=>o,Object.values(o));return(0,s.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(r,s){let o=s?.[e]?.[i]||l,d=a.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(n,...t)]}},98009:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(37876);r(14232);var s=r(47137),n=r(46907);let l=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[671,389,679,749,210,230,559,471,636,593,792],()=>t(24425)),_N_E=e.O()}]);